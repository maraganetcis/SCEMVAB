<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title> SCEMVAB</title>
<style>
  :root{--bg:#0f1724;--card:#0b1220;--accent:#7dd3fc;--muted:#9aa9bf;--glass:rgba(255,255,255,0.04)}
  html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,"Apple SD Gothic Neo","Noto Sans KR",sans-serif;background:linear-gradient(180deg,#071022 0%, #08182a 100%);color:#e6eef8}
  .wrap{max-width:1080px;margin:18px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6);}
  h1{margin:0 0 6px;font-weight:700}
  p.lead{margin:0 0 12px;color:var(--muted)}
  .grid{display:grid;grid-template-columns:1fr 400px;gap:18px}
  .questions{background:var(--card);padding:16px;border-radius:10px;max-height:74vh;overflow:auto}
  .panel{background:var(--glass);padding:12px;border-radius:10px}
  .q{padding:10px 8px;border-radius:8px;margin-bottom:8px;background:linear-gradient(180deg, rgba(255,255,255,0.008), transparent)}
  .q .txt{font-size:14px;margin-bottom:6px}
  .scale{display:flex;gap:6px}
  .scale input[type=radio]{display:none}
  .scale label{flex:1;text-align:center;padding:8px 6px;background:transparent;border-radius:6px;border:1px solid rgba(255,255,255,0.03);font-size:13px;cursor:pointer;color:var(--muted)}
  .scale input[type=radio]:checked + label{background:linear-gradient(90deg,var(--accent),#60a5fa);color:#072034;border:1px solid rgba(255,255,255,0.06);font-weight:600}
  .actions{display:flex;gap:8px;margin-top:12px}
  button{cursor:pointer;padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:#042034;font-weight:700}
  button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:600}
  .result{padding:12px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .bar{height:12px;background:rgba(255,255,255,0.06);border-radius:8px;overflow:hidden;margin:6px 0}
  .bar > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#60a5fa);width:0%}
  .archetypes{margin-top:10px}
  .atype{padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
  .small{font-size:13px;color:var(--muted)}
  .radar{width:100%;height:260px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border-radius:8px;display:flex;align-items:center;justify-content:center}
  .footer{margin-top:10px;color:var(--muted);font-size:13px}
  @media(max-width:980px){.grid{grid-template-columns:1fr;}.panel{position:sticky;top:12px}}
</style>
</head>
<body>
<div class="wrap">
  <h1>SCEMVAB PPI — Full Test (120문항)</h1>
  <p class="lead"> 120문항으로 7차원 프로파일을 정교하게 산출합니다. 모든 문항은 1(전혀 아니다)–7(매우 그렇다) 척도로 응답하세요.</p>
  <div class="grid">
    <div class="questions panel" id="questions">
      <!-- Questions injected by JS -->
    </div>

    <div class="panel" id="side">
      <div class="result" id="summary">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">결과 미검사</div>
            <div class="small">모든 문항에 응답 후 '결과 보기'를 누르면 즉시 결과가 표시됩니다.</div>
          </div>
          <div style="text-align:right">
            <div class="small">총 문항</div>
            <div style="font-weight:800;font-size:20px" id="totalN">120</div>
          </div>
        </div>
        <div style="margin-top:10px">
          <div class="small">측정 축 (0–100)</div>
          <div id="bars"></div>
        </div>

        <div class="archetypes" id="archetypes">
          <div class="small">대표 유형</div>
        </div>

        <div style="margin-top:10px" class="small">시각화</div>
        <div class="radar" id="radar">
          <svg id="rad" width="260" height="260" viewBox="-130 -130 260 260"></svg>
        </div>

        <div class="actions">
          <button id="show">결과 보기</button>
          <button class="ghost" id="reset">다시하기</button>
        </div>
      </div>

      <div class="footer">copyright 2025. Synox Studios</div>
    </div>
  </div>
</div>

<script>
/* ----- Proteus PPI — 120 items (7 axes) ----- */
/* Axes order: E C S M V A B */
const axes = ["E","C","S","M","V","A","B"];

/* We'll generate 120 items distributed across 7 axes:
   E:18 items, others:17 items each => 18 + 6*17 = 120
   To keep item texts meaningful, we use base prompt sets per axis and cycle/modify them.
*/
const axisCounts = [18,17,17,17,17,17,17]; // sum 120

// Base prompt templates for each axis (a handful each). We'll append index to disambiguate.
const basePrompts = {
  E: [
    "나는 작은 일에도 감정적으로 쉽게 동요한다.",
    "스트레스 상황에서 감정이 급격히 변하는 편이다.",
    "기쁜 감정이나 슬픔을 강하게 표현하는 편이다.",
    "감정 상처를 받으면 회복하는 데 시간이 오래 걸린다.",
    "일상에서의 정서적 기복이 잦다.",
    "부정적 사건에 오래 집착하는 편이다."
  ],
  C: [
    "문제를 해결할 때 논리적으로 접근하는 편이다.",
    "직관에 따라 빠르게 결정을 내리는 편이다.",
    "새로운 아이디어를 떠올리는 것을 즐긴다.",
    "데이터와 사실에 근거해 판단하려 노력한다.",
    "복잡한 정보를 분석하는 것을 좋아한다.",
    "이론적 사고를 선호하는 편이다."
  ],
  S: [
    "혼자 있는 것을 편하게 느낀다.",
    "타인의 감정을 잘 공감하고 돕는 편이다.",
    "팀보다 개인의 자율을 더 선호한다.",
    "사교적인 자리에서 에너지를 얻는 편이다.",
    "새로운 사람과 쉽게 친해지는 편이다.",
    "갈등 상황에서 중재하려는 경향이 있다."
  ],
  M: [
    "목표를 세우고 꾸준히 달성하려 노력한다.",
    "경쟁 상황에서 동기부여가 된다.",
    "여유롭게 삶을 즐기는 것을 선호한다.",
    "도전 과제에 끌리고 성취감을 중요시한다.",
    "계획을 세우고 실행하는 데 강점이 있다.",
    "보상과 인정이 행동의 큰 동력이다."
  ],
  V: [
    "전통과 안정성을 중요하게 생각한다.",
    "새로운 것을 시도하고 변화를 즐기는 편이다.",
    "사회적 규범을 따르는 편이다.",
    "혁신과 창의를 삶의 중심에 둔다.",
    "사회적 규칙보다 개인의 가치를 중시한다.",
    "미래 지향적인 변화를 선호한다."
  ],
  A: [
    "변화가 생기면 빠르게 적응하는 편이다.",
    "익숙한 패턴을 바꾸는 것이 불편하다.",
    "즉흥적으로 상황에 맞게 행동하는 편이다.",
    "계획대로 움직이는 것을 선호한다.",
    "새로운 환경에 빠르게 적응하는 편이다.",
    "예상치 못한 상황에서 유연하게 대처한다."
  ],
  B: [
    "작은 자극에도 신경이 예민하게 반응한다.",
    "평상시 각성 수준이 비교적 높은 편이다.",
    "안정적 환경에서 더 효율적으로 일한다.",
    "피로가 심하면 쉽게 무기력해진다.",
    "신체적 스트레스가 정신상태에 쉽게 영향을 준다.",
    "에너지 수준이 급격히 변하는 편이다."
  ]
};

// Build items array programmatically
const items = [];
let globalIdx = 0;
for(let ax=0; ax<7; ax++){
  const key = axes[ax];
  const count = axisCounts[ax];
  const templates = basePrompts[key];
  for(let i=0;i<count;i++){
    // pick a template cycling, then slightly vary by adding a phrase to diversify
    const base = templates[i % templates.length];
    const variation = (i % templates.length === 0) ? "" : ` (${i+1})`;
    items.push({ t: base + variation, a: ax });
    globalIdx++;
  }
}
// sanity check: items.length should be 120
// console.log(items.length);

/* Archetypes (same set as quick test, tuned prototypes) */

/* SCEMVAB 50개 Archetype 완전 버전 */
const archetypes = [
  {id:"Orion", desc:"분석가형", v:[25,88,30,72,50,68,28]},
  {id:"Vesta", desc:"창조적 열정가", v:[85,88,80,82,90,88,82]},
  {id:"Nereid", desc:"감정 공감가", v:[82,60,90,50,72,60,64]},
  {id:"Atlas", desc:"안정적 관리자", v:[18,82,80,78,30,22,20]},
  {id:"Hermes", desc:"탐험가", v:[50,75,70,76,80,88,72]},
  {id:"Selene", desc:"사색가", v:[78,84,30,48,72,56,75]},
  {id:"Ares", desc:"결단가", v:[20,85,20,92,28,52,36]},
  {id:"Gaia", desc:"조화형 조정자", v:[50,60,86,60,58,78,58]},
  {id:"Helios", desc:"혁신 리더", v:[88,90,82,88,92,90,86]},
  {id:"Nyx", desc:"신비적 내면형", v:[82,78,22,40,86,30,80]},
  {id:"Chiron", desc:"치유자", v:[86,72,92,56,74,72,60]},
  {id:"Themis", desc:"질서 철학가", v:[22,86,48,74,24,22,28]},
  {id:"Aurora", desc:"창의적 사색가", v:[88,72,40,60,88,62,70]},
  {id:"Boreas", desc:"전략적 계획자", v:[30,92,38,80,40,50,30]},
  {id:"Calypso", desc:"감정 표현가", v:[82,60,88,50,68,60,65]},
  {id:"Dion", desc:"모험가", v:[60,70,68,78,80,82,70]},
  {id:"Eos", desc:"목표 지향 사색가", v:[50,88,30,90,70,62,50]},
  {id:"Fauna", desc:"친화적 조정자", v:[70,60,90,60,60,78,55]},
  {id:"Galen", desc:"논리적 분석가", v:[20,92,30,70,40,50,35]},
  {id:"Hestia", desc:"안정적 감정 조절자", v:[30,80,88,50,50,40,25]},
  {id:"Icarus", desc:"혁신적 도전가", v:[88,78,60,88,90,85,75]},
  {id:"Juno", desc:"사회적 지도자", v:[50,75,90,78,70,80,60]},
  {id:"Kronos", desc:"계획적 전략가", v:[20,90,40,92,50,55,40]},
  {id:"Lyra", desc:"예술적 감정가", v:[90,65,82,60,88,72,80]},
  {id:"Morpheus", desc:"내향적 사색가", v:[78,80,20,50,70,55,75]},
  {id:"Nox", desc:"신비적 관찰자", v:[80,78,30,48,86,40,80]},
  {id:"Orionis", desc:"분석적 탐험가", v:[40,88,50,80,60,70,50]},
  {id:"Phoebe", desc:"감성적 창조자", v:[82,60,88,50,82,60,65]},
  {id:"Quirinus", desc:"결단적 실행자", v:[22,85,25,92,28,55,40]},
  {id:"Rhea", desc:"균형 조정자", v:[50,65,88,60,60,78,55]},
  {id:"Selene2", desc:"사색적 치유자", v:[78,84,40,56,72,62,75]},
  {id:"Thalassa", desc:"감정 공감 + 탐험형", v:[82,68,90,60,74,70,65]},
  {id:"Ulysses", desc:"전략적 탐험가", v:[40,88,50,88,70,75,55]},
  {id:"Vesper", desc:"창의적 사색가", v:[88,72,38,60,88,62,70]},
  {id:"Wren", desc:"친화적 협력가", v:[70,60,90,60,60,78,55]},
  {id:"Xanthe", desc:"예술적 내향형", v:[88,70,40,60,86,62,72]},
  {id:"Ymir", desc:"강인한 안정형", v:[30,82,80,78,40,50,35]},
  {id:"Zephyr", desc:"자유로운 탐험가", v:[60,70,70,80,82,85,70]},
  {id:"Aether", desc:"내향적 창조가", v:[78,82,30,60,78,60,72]},
  {id:"Borealis", desc:"혁신적 전략가", v:[88,90,50,88,92,88,80]},
  {id:"Calliope", desc:"예술적 감정 표현가", v:[90,65,82,60,88,72,80]},
  {id:"Daedalus", desc:"창의적 설계자", v:[88,88,40,88,92,85,78]},
  {id:"Euryale", desc:"감정 + 분석형", v:[80,75,85,60,80,70,65]},
  {id:"Fortuna", desc:"운용적 조정자", v:[50,68,88,60,62,78,58]},
  {id:"Galatea", desc:"친화적 사색가", v:[70,60,88,60,60,78,55]},
  {id:"Hyperion", desc:"결단 + 혁신형", v:[20,88,35,92,28,72,50]},
  {id:"Io", desc:"탐험적 창조형", v:[85,72,60,80,90,78,70]},
  {id:"Jormungand", desc:"강인한 전략가", v:[25,92,40,88,40,55,35]},
  {id:"Klytemnestra", desc:"사회적 지도자", v:[50,75,90,78,70,80,60]},
  {id:"Leto", desc:"사색적 조정자", v:[78,84,40,60,72,62,75]}
];

/* DOM building */
const qpanel = document.getElementById('questions');
items.forEach((it, idx) => {
  const el = document.createElement('div');
  el.className='q';
  // For accessibility and compactness: render 1..7 radios with labels
  let radios = '';
  for(let n=1;n<=7;n++){
    radios += `<input type="radio" id="q${idx}_r${n}" name="q${idx}" value="${n}"><label for="q${idx}_r${n}">${n}</label>`;
  }
  el.innerHTML = `<div class="txt"><strong>Q${idx+1}.</strong> ${it.t}</div>
    <div class="scale" data-idx="${idx}">${radios}</div>`;
  qpanel.appendChild(el);
});

/* Side bar bars */
const bars = document.getElementById('bars');
axes.forEach(ax => {
  const wrap = document.createElement('div');
  wrap.innerHTML = `<div style="display:flex;justify-content:space-between"><div style="font-weight:700">${ax}</div><div class="small" id="lbl_${ax}">-</div></div>
  <div class="bar"><i id="bar_${ax}"></i></div>`;
  bars.appendChild(wrap);
});

/* Read answers and compute */
function readAnswers(){
  const answers = [];
  for(let i=0;i<items.length;i++){
    const radios = document.getElementsByName('q'+i);
    let val = null;
    for(const r of radios){ if(r.checked){ val = Number(r.value); break; } }
    answers.push(val);
  }
  return answers;
}
function computeProfile(answers){
  const mapVal = v => (v===null ? null : Math.round((v-1)/6*100));
  const sums = new Array(7).fill(0);
  const counts = new Array(7).fill(0);
  answers.forEach((ans, i) => {
    const ax = items[i].a;
    const v = mapVal(ans);
    if(v!==null){ sums[ax]+=v; counts[ax]++; }
  });
  const profile = sums.map((s, i) => counts[i]?Math.round(s/counts[i]):50);
  return profile;
}

/* Show profile */
function showProfile(profile){
  axes.forEach((ax,i)=>{
    document.getElementById('lbl_'+ax).textContent = profile[i] + " /100";
    document.getElementById('bar_'+ax).style.width = profile[i]+'%';
  });
  // compute archetype similarity
  const dists = archetypes.map(a => {
    let s=0;
    for(let i=0;i<7;i++){ const diff = profile[i]-a.v[i]; s += diff*diff; }
    return Math.sqrt(s);
  });
  const maxd = Math.max(...dists);
  const simRaw = dists.map(d => Math.max(0, (maxd - d)));
  const sumSim = simRaw.reduce((a,b)=>a+b,0) || 1;
  const sims = simRaw.map(s => Math.round(s/sumSim*100));
  // normalize to sum 100
  let total = sims.reduce((a,b)=>a+b,0);
  if(total !== 100){
    const diff = 100 - total;
    sims[0] += diff;
  }

  // build archetype list
  const archDiv = document.getElementById('archetypes');
  archDiv.innerHTML = '<div class="small">대표 유형</div>';
  const paired = archetypes.map((a,i)=>({id:a.id,desc:a.desc,score:sims[i],d:dists[i]}))
    .sort((x,y)=>y.score - x.score);
  paired.slice(0,4).forEach(p=>{
    const el = document.createElement('div');
    el.className='atype';
    el.innerHTML = `<div><strong>${p.id}</strong><div class="small">${p.desc}</div></div><div style="text-align:right"><div style="font-weight:800">${p.score}%</div><div class="small">${Math.round(p.d)}</div></div>`;
    archDiv.appendChild(el);
  });

  // radar
  drawRadar(profile);

  // summary block
  const top = paired[0];
  const second = paired[1];
  const summary = document.getElementById('summary');
  let sumHtml = `<div style="margin-top:8px"><strong>주 유형:</strong> ${top.id} (${top.score}%) — ${top.desc}<br><strong>보조 유형:</strong> ${second.id} (${second.score}%)</div>
  <div style="margin-top:8px" class="small">설명: 상위 유형을 기반으로 요약·추천을 제시합니다.</div>`;
  sumHtml += `<div style="margin-top:8px"><strong>추천:</strong> ${recommendation(profile)}</div>`;
  summary.querySelectorAll('.summary-text').forEach(e=>e.remove());
  const sdiv = document.createElement('div');
  sdiv.className='summary-text';
  sdiv.style.marginTop='10px';
  sdiv.innerHTML = sumHtml;
  summary.appendChild(sdiv);
}

/* Simple recommendation heuristics */
function recommendation(profile){
  const rec = [];
  if(profile[3] > 75) rec.push("리더십/프로젝트 중심 역할 권장");
  if(profile[1] > 75) rec.push("연구/분석/전문직 추천");
  if(profile[4] > 75) rec.push("혁신·창의 분야 적합");
  if(profile[2] > 75) rec.push("대인관계/상담/서비스 분야 적합");
  if(profile[5] > 75) rec.push("변화·유연성 요구 직무 권장");
  if(profile[0] > 75) rec.push("정서 관리(마인드풀니스 등) 권장");
  if(profile[6] > 75) rec.push("에너지·휴식 관리 중요");
  if(rec.length===0) rec.push("균형형: 팀 내 다양한 역할 수행 가능");
  return rec.join(" · ");
}

/* Radar drawing */
function drawRadar(profile){
  const svg = document.getElementById('rad');
  svg.innerHTML = '';
  const R = 100;
  const N = axes.length;
  for(let ring=4; ring>=1; ring--){
    const rr = R*ring/4;
    const points = [];
    for(let i=0;i<N;i++){
      const ang = -Math.PI/2 + i*(2*Math.PI/N);
      const x = rr*Math.cos(ang);
      const y = rr*Math.sin(ang);
      points.push(`${x},${y}`);
    }
    const poly = document.createElementNS("http://www.w3.org/2000/svg","polygon");
    poly.setAttribute("points",points.join(' '));
    poly.setAttribute("fill","none");
    poly.setAttribute("stroke","rgba(255,255,255,0.06)");
    poly.setAttribute("stroke-width","1");
    svg.appendChild(poly);
  }
  for(let i=0;i<N;i++){
    const ang = -Math.PI/2 + i*(2*Math.PI/N);
    const x = (R+16)*Math.cos(ang);
    const y = (R+16)*Math.sin(ang);
    const t = document.createElementNS("http://www.w3.org/2000/svg","text");
    t.setAttribute("x",x);
    t.setAttribute("y",y+4);
    t.setAttribute("text-anchor","middle");
    t.setAttribute("font-size","11");
    t.setAttribute("fill","rgba(255,255,255,0.8)");
    t.textContent = axes[i];
    svg.appendChild(t);
    const lx = R*Math.cos(ang);
    const ly = R*Math.sin(ang);
    const line = document.createElementNS("http://www.w3.org/2000/svg","line");
    line.setAttribute("x1","0");
    line.setAttribute("y1","0");
    line.setAttribute("x2",lx);
    line.setAttribute("y2",ly);
    line.setAttribute("stroke","rgba(255,255,255,0.03)");
    svg.appendChild(line);
  }
  const pts = [];
  for(let i=0;i<N;i++){
    const v = profile[i]/100;
    const r = v*R;
    const ang = -Math.PI/2 + i*(2*Math.PI/N);
    const x = r*Math.cos(ang);
    const y = r*Math.sin(ang);
    pts.push(`${x},${y}`);
  }
  const poly = document.createElementNS("http://www.w3.org/2000/svg","polygon");
  poly.setAttribute("points",pts.join(' '));
  const defs = document.createElementNS("http://www.w3.org/2000/svg","defs");
  defs.innerHTML = `<linearGradient id="ggrad" x1="0" x2="1"><stop offset="0%" stop-color="#7dd3fc" stop-opacity="0.24"/><stop offset="100%" stop-color="#60a5fa" stop-opacity="0.12"/></linearGradient>`;
  svg.appendChild(defs);
  poly.setAttribute("fill","url(#ggrad)");
  poly.setAttribute("stroke","rgba(125,211,252,0.9)");
  poly.setAttribute("stroke-width","2");
  svg.appendChild(poly);
}

/* Button handlers */
document.getElementById('show').addEventListener('click',()=>{
  const answers = readAnswers();
  const missing = answers.reduce((acc,v)=>acc + (v===null?1:0),0);
  if(missing>0){
    if(!confirm(`미응답 ${missing}문항이 있습니다. 미응답은 자동으로 중립값(4)으로 처리됩니다. 계속하시겠습니까?`)){
      return;
    }
  }
  const filled = answers.map(v => v===null?4:v);
  const profile = computeProfile(filled);
  showProfile(profile);
  // scroll to top of side summary for convenience
  document.getElementById('side').scrollIntoView({behavior:'smooth'});
});

document.getElementById('reset').addEventListener('click',()=>{
  if(!confirm('테스트를 초기화하고 처음부터 시작하시겠습니까?')) return;
  for(let i=0;i<items.length;i++){
    const radios = document.getElementsByName('q'+i);
    for(const r of radios) r.checked = false;
  }
  axes.forEach(ax=>{
    document.getElementById('lbl_'+ax).textContent='-';
    document.getElementById('bar_'+ax).style.width='0%';
  });
  document.getElementById('archetypes').innerHTML = '<div class="small">대표 유형</div>';
  document.getElementById('rad').innerHTML='';
  document.querySelectorAll('.summary-text').forEach(e=>e.remove());
});

/* Accessibility: clicking labels */
qpanel.addEventListener('click', e=>{
  if(e.target.tagName === 'LABEL'){
    const forId = e.target.getAttribute('for');
    if(forId){
      const inp = document.getElementById(forId);
      if(inp) inp.checked = true;
    }
  }
});
</script>
</body>
</html>
